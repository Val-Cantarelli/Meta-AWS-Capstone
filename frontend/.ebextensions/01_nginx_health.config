files:
  "/etc/nginx/conf.d/elasticbeanstalk/99_health.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      # Responde ao health check do ALB e do EB
      location = /health/ { return 200 "OK"; add_header Content-Type text/plain; }
      location = /health  { return 200 "OK"; add_header Content-Type text/plain; }

container_commands:
  01_test_nginx_config:
    command: "nginx -t"
  02_reload_nginx:
    command: "systemctl reload nginx"
    leader_only: true
